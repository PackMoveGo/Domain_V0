"use strict";exports.id=8796,exports.ids=[8796],exports.modules={22863:(a,b,c)=>{c.d(b,{AV:()=>e,mI:()=>d});let d=()=>0,e=()=>new Date("2024-01-01T00:00:00.000Z")},24830:(a,b,c)=>{c.d(b,{n:()=>h});let d=new Map,e={maxSize:200,defaultTTL:6e5,version:"0.0",compressionThreshold:512,adaptiveTTL:!0},f={COOKIE_CONSENT:"cookie-consent-status",API_RESPONSES:"api-responses",BANNER_TIMER:"banner-timer",USER_PREFERENCES:"user-preferences"};class g{static getInstance(){return g.instance||(g.instance=new g),g.instance}get(a){let b=performance.now(),c=d.get(a);return c?Date.now()-c.timestamp>c.ttl||c.version!==e.version?(d.delete(a),this.cacheMisses++,this.updateResponseTime(performance.now()-b),null):(c.accessCount++,c.lastAccessed=Date.now(),e.adaptiveTTL&&this.applyAdaptiveTTL(c),this.cacheHits++,this.updateResponseTime(performance.now()-b),c.data):(this.cacheMisses++,this.updateResponseTime(performance.now()-b),null)}set(a,b,c=e.defaultTTL){this.cleanup();let f=JSON.stringify(b),g=new Blob([f]).size,h=b;if(g>e.compressionThreshold)try{let a=this.compressData(f);if(a.length<f.length){h=a;let b=new Blob([a]).size;this.compressionSavings+=g-b,g=b}}catch(b){console.warn("Compression failed for cache entry:",a)}this.totalUncompressedSize+=new Blob([JSON.stringify(b)]).size,d.size>=e.maxSize&&this.evictOldest();let i={data:h,timestamp:Date.now(),ttl:c,version:e.version,accessCount:0,lastAccessed:Date.now(),size:g};d.set(a,i)}compressData(a){if(a.length<100)return a;let b="",c=1,d=a[0];for(let e=1;e<a.length;e++)a[e]===d?c++:(c>3?b+=`${c}${d}`:b+=d.repeat(c),d=a[e],c=1);return c>3?b+=`${c}${d}`:b+=d.repeat(c),b.length<a.length?b:a}decompressData(a){if("string"!=typeof a)return a;try{let b="",c=0;for(;c<a.length;)if(/\d/.test(a[c])){let d="";for(;c<a.length&&/\d/.test(a[c]);)d+=a[c],c++;c<a.length&&(b+=a[c].repeat(parseInt(d)),c++)}else b+=a[c],c++;return JSON.parse(b)}catch{return a}}applyAdaptiveTTL(a){let b=Date.now()-a.timestamp;if(a.accessCount/Math.max(b/1e3,1)>.1){let b=Math.min(1.5*a.ttl,18e5);b>a.ttl&&(a.ttl=b,this.adaptiveTTLAdjustments++)}}evictOldest(){let a=Array.from(d.entries());a.forEach(([,a])=>{let b=Date.now()-a.timestamp,c=a.accessCount/Math.max(b/1e3,1),d=1/(Date.now()-a.lastAccessed+1),e=a.size/1024;a.evictionScore=.4*c+.4*d-.2*e}),a.sort((a,b)=>(a[1].evictionScore||0)-(b[1].evictionScore||0));let b=Math.ceil(.2*e.maxSize);for(let c=0;c<b&&c<a.length;c++)d.delete(a[c][0])}updateResponseTime(a){this.totalResponseTime+=a,this.responseCount++}getStats(){let a=this.cacheHits+this.cacheMisses,b=a>0?this.cacheHits/a*100:0,c=this.responseCount>0?this.totalResponseTime/this.responseCount:0,e=0;for(let a of d.values())e+=a.size;let f=this.totalUncompressedSize>0?(this.totalUncompressedSize-e)/this.totalUncompressedSize*100:0;return{totalRequests:a,hits:this.cacheHits,misses:this.cacheMisses,hitRate:b,averageResponseTime:c,memoryUsage:e,compressionRatio:f,adaptiveTTLAdjustments:this.adaptiveTTLAdjustments}}getPerformanceReport(){let a=this.getStats(),b=Math.floor((Date.now()-this.cacheStartTime)/1e3);return`
üìä Cache Performance Report
==========================
‚è±Ô∏è  Uptime: ${b}s
üì¶ Size: ${d.size}/${e.maxSize} items
üéØ Hit Rate: ${a.hitRate.toFixed(1)}%
‚ö° Avg Response Time: ${a.averageResponseTime.toFixed(2)}ms
üíæ Memory Usage: ${(a.memoryUsage/1024).toFixed(1)}KB
üóúÔ∏è  Compression Savings: ${a.compressionRatio.toFixed(1)}%
üîÑ Adaptive TTL Adjustments: ${a.adaptiveTTLAdjustments}
üìà Total Requests: ${a.totalRequests}
‚úÖ Hits: ${a.hits}
‚ùå Misses: ${a.misses}
    `.trim()}resetStats(){this.cacheHits=0,this.cacheMisses=0,this.cacheStartTime=Date.now(),this.totalResponseTime=0,this.responseCount=0,this.adaptiveTTLAdjustments=0,this.compressionSavings=0,this.totalUncompressedSize=0}cacheApiResponse(a,b,c){let d=`${f.API_RESPONSES}:${a}`;this.set(d,b,c)}getCachedApiResponse(a){let b=`${f.API_RESPONSES}:${a}`,c=this.get(b);return c?this.decompressData(c):null}cacheCookieConsent(a){this.set(f.COOKIE_CONSENT,a,3e4)}getCachedCookieConsent(){return this.get(f.COOKIE_CONSENT)}cacheBannerTimer(a){this.set(f.BANNER_TIMER,a,1e3)}getCachedBannerTimer(){return this.get(f.BANNER_TIMER)}cacheUserPreferences(a){this.set(f.USER_PREFERENCES,a,6e5)}getCachedUserPreferences(){return this.get(f.USER_PREFERENCES)}invalidateApiCache(){for(let[a]of d.entries())a.startsWith(`${f.API_RESPONSES}:`)&&d.delete(a)}invalidateApiEndpoint(a){let b=`${f.API_RESPONSES}:${a}`;d.delete(b)}delete(a){return d.delete(a)}clear(){d.clear(),this.cacheHits=0,this.cacheMisses=0,this.totalResponseTime=0,this.responseCount=0,this.adaptiveTTLAdjustments=0,this.compressionSavings=0,this.totalUncompressedSize=0,this.cacheStartTime=Date.now()}clearOnOffline(){"undefined"==typeof navigator||navigator.onLine||(console.log("\uD83D\uDD04 Going offline - clearing API cache"),this.clear())}isOnline(){return"undefined"==typeof navigator||navigator.onLine}forceClear(){console.log("\uD83D\uDD04 Manually clearing API cache"),this.clear()}cleanup(){let a=Date.now();for(let[b,c]of d.entries())a-c.timestamp>c.ttl&&d.delete(b)}constructor(){this.cacheHits=0,this.cacheMisses=0,this.cacheStartTime=Date.now(),this.totalResponseTime=0,this.responseCount=0,this.adaptiveTTLAdjustments=0,this.compressionSavings=0,this.totalUncompressedSize=0}}let h=g.getInstance();Date.now()},31814:(a,b,c)=>{c.d(b,{k:()=>f}),c(8732);var d=c(82015);c(98370),c(97790);let e=(0,d.createContext)(void 0),f=()=>{let a=(0,d.useContext)(e);if(!a)throw Error("useCookiePreferences must be used within a CookiePreferencesProvider");return a}},58796:(a,b,c)=>{c.r(b),c.d(b,{default:()=>i});var d=c(8732),e=c(82015),f=c(31814),g=c(54822),h=c(22863);let i=()=>{let a,b,c,i,j,k=(0,g.useNavigate)(),l=(0,g.useLocation)(),[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(!1),u=(0,e.useRef)(0);["/cookie-opt-out","/privacy","/terms"].includes(l.pathname);let v="/cookie-opt-out"===l.pathname,[w,x]=(0,e.useState)(!1),[y,z]=(0,e.useState)(null);try{let d=(0,f.k)();d.preferences,a=d.hasOptedOut,b=d.hasMadeChoice,c=d.optIn,d.optOut,d.updatePreferences,i=d.isLoading,d.isApiBlocked,d.checkBannerTimer,j=d.clearBannerCache}catch(d){console.error("\uD83C\uDF6A CookieOptOut: Error accessing cookie preferences:",d),a=!1,b=!1,i=!1,c=()=>console.warn("Cookie preferences not available"),j=()=>{}}let A=()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",document.body.style.touchAction="",document.documentElement.style.overflow="",document.documentElement.style.touchAction="",window.scrollTo(0,u.current)};(0,e.useEffect)(()=>{let a=setTimeout(()=>{r(!0)},100);return()=>clearTimeout(a)},[]),(0,e.useEffect)(()=>{if(q&&!i){let a=setTimeout(()=>{x(!0)},200);return()=>clearTimeout(a)}},[q,i]),(0,e.useEffect)(()=>{let a=()=>{console.log("\uD83C\uDF6A Cookie consent reset event received - showing modal"),n(!0),p(!1)};return window.addEventListener("cookie-consent-reset",a),()=>window.removeEventListener("cookie-consent-reset",a)},[]),(0,e.useEffect)(()=>{let a;return m&&!i&&q&&!v?a=(()=>{u.current=window.scrollY,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${u.current}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",document.documentElement.style.overflow="hidden",document.body.style.touchAction="none",document.documentElement.style.touchAction="none";let a=a=>{a.preventDefault()},b=a=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","PageUp","PageDown","Home","End"].includes(a.code)&&a.preventDefault()};return document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("keydown",b),()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchmove",a),document.removeEventListener("keydown",b)}})():m||v||A(),()=>{a&&a(),v||A()}},[m,i,q,v]);let B=()=>{console.log("\uD83C\uDF6A CookieOptOut: handleOptIn called"),console.log("\uD83C\uDF6A CookieOptOut: optIn function available:",!!c),console.log("\uD83C\uDF6A CookieOptOut: hasMadeChoice:",b,"hasOptedOut:",a),z("accept"),c?(console.log("\uD83C\uDF6A CookieOptOut: Calling optIn function"),t(!0),c(),v?setTimeout(()=>{console.log("\uD83C\uDF6A CookieOptOut: Navigating to home page after opt-in (full page mode)"),k("/")},500):(p(!0),setTimeout(()=>{n(!1),p(!1),t(!1),console.log("\uD83C\uDF6A CookieOptOut: Waiting for API state to update before navigation..."),setTimeout(()=>{console.log("\uD83C\uDF6A CookieOptOut: Navigating to home page after opt-in"),k("/")},200)},300))):console.warn("\uD83C\uDF6A CookieOptOut: Cookie preferences context not available for opt-in")},C=()=>{z("custom"),localStorage.setItem("packmovego-last-banner-time",(0,h.mI)().toString()),j&&j(),v||k("/cookie-opt-out")},D=()=>{localStorage.setItem("packmovego-last-banner-time",(0,h.mI)().toString()),j&&j(),v?k("/"):(p(!0),setTimeout(()=>{n(!1),p(!1)},300))};return m&&!i&&q?v?(0,d.jsx)("div",{className:"min-h-screen py-8",children:(0,d.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:`
            bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-6 sm:p-8 lg:p-12 relative
            transition-all duration-1000 ease-out
            ${w?"translate-y-0 opacity-100 scale-100":"translate-y-12 opacity-0 scale-95"}
            border border-white/20
          `,children:[(0,d.jsx)("button",{onClick:()=>{v?k("/"):(p(!0),setTimeout(()=>{n(!1),p(!1)},300))},className:`
                absolute top-4 right-4 w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 rounded-full flex items-center justify-center transition-all duration-300 z-10 touch-manipulation
                ${w?"translate-x-0 opacity-100":"translate-x-4 opacity-0"}
              `,style:{transitionDelay:w?"200ms":"0ms"},"aria-label":"Close cookie preferences",children:(0,d.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,d.jsxs)("div",{className:`
              text-center mb-6 sm:mb-8
              transition-all duration-1000 ease-out delay-300
              ${w?"translate-y-0 opacity-100":"translate-y-6 opacity-0"}
            `,children:[(0,d.jsx)("div",{className:`
                w-16 h-16 sm:w-20 sm:h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6
                transition-all duration-1000 ease-out delay-400
                ${w?"scale-100 rotate-0":"scale-75 rotate-12"}
              `,children:(0,d.jsx)("svg",{className:`
                  w-8 h-8 sm:w-10 sm:h-10 text-red-600
                  transition-all duration-800 ease-out delay-500
                  ${w?"scale-100":"scale-0"}
                `,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsx)("h1",{className:`
                text-2xl sm:text-3xl font-bold text-gray-900 mb-3
                transition-all duration-800 ease-out delay-600
                ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
              `,children:"Cookie Preferences"}),(0,d.jsx)("p",{className:`
                text-base sm:text-lg text-gray-600
                transition-all duration-800 ease-out delay-700
                ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
              `,children:"Manage your cookie preferences and privacy settings"})]}),(0,d.jsx)("div",{className:`
          bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6 mb-4 sm:mb-6
          transition-all duration-700 ease-out delay-400
          ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
        `,children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsxs)("div",{className:"ml-3",children:[(0,d.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-yellow-800 mb-2",children:"Third-Party Advertising Cookies"}),(0,d.jsx)("p",{className:"text-sm sm:text-base text-yellow-700 leading-relaxed",children:'This website uses third party advertising cookies to serve you relevant ads. You may opt-out from these third party ad cookies by clicking the "Opt-out" button below. If you have a Pack Move GO account, you may opt-out of the "sale" or "sharing" of your data here.'})]})]})}),(0,d.jsx)("div",{className:`
          bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6
          transition-all duration-700 ease-out delay-500
          ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
        `,children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("span",{className:"text-sm sm:text-base text-red-800 font-medium",children:a?"You are currently opted out of all cookies":"Please make a choice about cookie preferences"})]})}),(0,d.jsxs)("div",{className:`
          flex flex-col sm:flex-row gap-3 sm:gap-4
          transition-all duration-700 ease-out delay-600
          ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
        `,children:[(0,d.jsxs)("button",{onClick:B,disabled:s,className:`
              flex-1 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-semibold 
              py-3 sm:py-3 px-4 sm:px-6 rounded-lg transition duration-200 flex items-center justify-center
              min-h-[48px] touch-manipulation
              ${s?"opacity-50 cursor-not-allowed":"hover:bg-blue-700 active:bg-blue-800"}
              ${"accept"===y?"ring-2 ring-blue-300 ring-offset-2":""}
            `,children:[(0,d.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{className:"text-sm sm:text-base",children:s&&"accept"===y?"Opting In...":"Opt In to All Cookies"})]}),(0,d.jsx)("button",{onClick:C,disabled:s,className:`
              flex-1 bg-gray-200 hover:bg-gray-300 active:bg-gray-400 text-gray-800 font-semibold 
              py-3 sm:py-3 px-4 sm:px-6 rounded-lg transition duration-200 min-h-[48px] touch-manipulation
              ${s?"opacity-50 cursor-not-allowed":"hover:bg-gray-300 active:bg-gray-400"}
              ${"custom"===y?"ring-2 ring-gray-300 ring-offset-2":""}
            `,children:(0,d.jsx)("span",{className:"text-sm sm:text-base",children:"Manage Preferences"})})]}),b&&!a&&(0,d.jsx)("div",{className:`
            mt-3 sm:mt-4 text-center
            transition-all duration-700 ease-out delay-700
            ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
          `,children:(0,d.jsx)("button",{onClick:D,disabled:s,className:`
                text-sm sm:text-base text-gray-500 hover:text-gray-700 active:text-gray-800 underline
                py-2 px-3 touch-manipulation
                ${s?"opacity-50 cursor-not-allowed":"hover:text-gray-700 active:text-gray-800"}
              `,children:"Dismiss for 30 minutes"})}),(0,d.jsx)("div",{className:`
              mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200
              transition-all duration-700 ease-out delay-800
              ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
            `,children:(0,d.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 text-center leading-relaxed",children:["By opting in, you agree to our"," ",(0,d.jsx)("a",{href:"/privacy",className:"text-blue-600 hover:text-blue-800 active:text-blue-900 underline touch-manipulation",children:"Privacy Policy"})," ","and"," ",(0,d.jsx)("a",{href:"/terms",className:"text-blue-600 hover:text-blue-800 active:text-blue-900 underline touch-manipulation",children:"Terms of Service"})]})})]})})}):(0,d.jsx)("div",{className:`
        fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[10001] p-2 sm:p-4
        transition-all duration-700 ease-[cubic-bezier(0.4,0,0.2,1)]
        ${o?"opacity-0 backdrop-blur-none":"opacity-100 backdrop-blur-sm"}
        ${!q?"pointer-events-none":""}
      `,style:{touchAction:"none"},children:(0,d.jsxs)("div",{className:`
        bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl w-full p-4 sm:p-6 lg:p-8 relative
        transition-all duration-1000 ease-[cubic-bezier(0.34,1.56,0.64,1)] max-h-[95vh] overflow-y-auto
        ${o?"scale-90 opacity-0 rotate-2 translate-y-4":"scale-100 opacity-100 rotate-0 translate-y-0"}
        ${w?"translate-y-0":"translate-y-12"}
        border border-white/20
        hover:shadow-3xl
      `,children:[(0,d.jsxs)("div",{className:`
          text-center mb-4 sm:mb-6
          transition-all duration-1000 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-200
          ${w?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}
        `,children:[(0,d.jsx)("div",{className:`
            w-12 h-12 sm:w-16 sm:h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4
            transition-all duration-1200 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] delay-300
            ${w?"scale-100 rotate-0":"scale-50 rotate-180"}
            hover:scale-110 hover:rotate-12 hover:bg-red-200
            shadow-lg hover:shadow-xl
          `,children:(0,d.jsx)("svg",{className:`
              w-6 h-6 sm:w-8 sm:h-8 text-red-600
              transition-all duration-800 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] delay-500
              ${w?"scale-100 rotate-0":"scale-0 rotate-360"}
            `,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsx)("h2",{className:`
            text-xl sm:text-2xl font-bold text-gray-900 mb-2
            transition-all duration-800 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-600
            ${w?"translate-y-0 opacity-100":"translate-y-6 opacity-0"}
            hover:text-red-600
          `,children:"Cookie Preferences"}),(0,d.jsx)("p",{className:`
            text-sm sm:text-base text-gray-600
            transition-all duration-800 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-700
            ${w?"translate-y-0 opacity-100":"translate-y-6 opacity-0"}
          `,children:"Manage your cookie preferences and privacy settings"})]}),(0,d.jsx)("div",{className:`
          bg-yellow-50 border border-yellow-200 rounded-lg p-4 sm:p-6 mb-4 sm:mb-6
          transition-all duration-1000 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-800
          ${w?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-90"}
          hover:shadow-lg hover:scale-[1.02] hover:bg-yellow-100
        `,children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:`
              flex-shrink-0
              transition-all duration-800 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] delay-900
              ${w?"scale-100 rotate-0":"scale-0 rotate-360"}
            `,children:(0,d.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-600 mt-0.5 transition-all duration-300 hover:scale-110 hover:text-yellow-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,d.jsxs)("div",{className:`
              ml-3
              transition-all duration-800 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-1000
              ${w?"translate-x-0 opacity-100":"translate-x-6 opacity-0"}
            `,children:[(0,d.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-yellow-800 mb-2 transition-all duration-300 hover:text-yellow-900",children:"Third-Party Advertising Cookies"}),(0,d.jsx)("p",{className:"text-sm sm:text-base text-yellow-700 leading-relaxed transition-all duration-300 hover:text-yellow-800",children:'This website uses third party advertising cookies to serve you relevant ads. You may opt-out from these third party ad cookies by clicking the "Opt-out" button below. If you have a Pack Move GO account, you may opt-out of the "sale" or "sharing" of your data here.'})]})]})}),(0,d.jsx)("div",{className:`
          bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6
          transition-all duration-1000 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-1100
          ${w?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-90"}
          hover:shadow-lg hover:scale-[1.02] hover:bg-red-100
        `,children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:`
              flex-shrink-0
              transition-all duration-800 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)] delay-1200
              ${w?"scale-100 rotate-0":"scale-0 rotate-360"}
            `,children:(0,d.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 mr-2 transition-all duration-300 hover:scale-110 hover:text-red-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,d.jsx)("span",{className:`
              text-sm sm:text-base text-red-800 font-medium
              transition-all duration-800 ease-[cubic-bezier(0.34,1.56,0.64,1)] delay-1300
              ${w?"translate-x-0 opacity-100":"translate-x-6 opacity-0"}
            `,children:a?"You are currently opted out of all cookies":"Please make a choice about cookie preferences"})]})}),(0,d.jsxs)("div",{className:`
          flex flex-col sm:flex-row gap-3 sm:gap-4
          transition-all duration-700 ease-out delay-1200
          ${w?"translate-y-0 opacity-100":"translate-y-8 opacity-0"}
        `,children:[(0,d.jsxs)("button",{onClick:B,disabled:s,className:`
              flex-1 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-semibold 
              py-3 sm:py-3 px-4 sm:px-6 rounded-lg transition-all duration-300 flex items-center justify-center
              min-h-[48px] touch-manipulation transform
              ${s?"opacity-50 cursor-not-allowed":"hover:bg-blue-700 active:bg-blue-800 hover:scale-105 hover:shadow-lg"}
              ${"accept"===y?"ring-4 ring-blue-300 ring-offset-2 scale-105 shadow-lg":""}
              ${w?"translate-x-0":"translate-x-8"}
            `,style:{transitionDelay:w?"1300ms":"0ms"},children:[(0,d.jsx)("svg",{className:`
              w-4 h-4 sm:w-5 sm:h-5 mr-2 flex-shrink-0
              transition-all duration-300 ease-out
              ${"accept"===y?"scale-110 rotate-12":"scale-100 rotate-0"}
            `,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,d.jsx)("span",{className:`
              text-sm sm:text-base
              transition-all duration-300 ease-out
              ${"accept"===y?"font-bold":"font-semibold"}
            `,children:s&&"accept"===y?"Opting In...":"Opt In to All Cookies"})]}),(0,d.jsx)("button",{onClick:C,disabled:s,className:`
              flex-1 bg-gray-200 hover:bg-gray-300 active:bg-gray-400 text-gray-800 font-semibold 
              py-3 sm:py-3 px-4 sm:px-6 rounded-lg transition-all duration-300 min-h-[48px] touch-manipulation transform
              ${s?"opacity-50 cursor-not-allowed":"hover:bg-gray-300 active:bg-gray-400 hover:scale-105 hover:shadow-lg"}
              ${"custom"===y?"ring-4 ring-gray-300 ring-offset-2 scale-105 shadow-lg":""}
              ${w?"translate-x-0":"translate-x-8"}
            `,style:{transitionDelay:w?"1400ms":"0ms"},children:(0,d.jsx)("span",{className:`
              text-sm sm:text-base
              transition-all duration-300 ease-out
              ${"custom"===y?"font-bold":"font-semibold"}
            `,children:"Manage Preferences"})})]}),b&&!a&&(0,d.jsx)("div",{className:`
            mt-3 sm:mt-4 text-center
            transition-all duration-700 ease-out delay-1500
            ${w?"translate-y-0 opacity-100":"translate-y-6 opacity-0"}
          `,children:(0,d.jsx)("button",{onClick:D,disabled:s,className:`
                text-sm sm:text-base text-gray-500 hover:text-gray-700 active:text-gray-800 underline
                py-2 px-3 touch-manipulation transition-all duration-300 transform
                ${s?"opacity-50 cursor-not-allowed":"hover:text-gray-700 active:text-gray-800 hover:scale-105"}
                ${w?"translate-x-0":"translate-x-4"}
              `,style:{transitionDelay:w?"1600ms":"0ms"},children:"Dismiss for 30 minutes"})}),(0,d.jsx)("div",{className:`
          mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-gray-200
          transition-all duration-700 ease-out delay-1700
          ${w?"translate-y-0 opacity-100":"translate-y-6 opacity-0"}
        `,children:(0,d.jsxs)("p",{className:`
            text-xs sm:text-sm text-gray-600 text-center leading-relaxed
            transition-all duration-600 ease-out delay-1800
            ${w?"translate-y-0 opacity-100":"translate-y-4 opacity-0"}
          `,children:["By opting in, you agree to our"," ",(0,d.jsx)("a",{href:"/privacy",className:"text-blue-600 hover:text-blue-800 active:text-blue-900 underline touch-manipulation transition-all duration-300 hover:scale-105",children:"Privacy Policy"})," ","and"," ",(0,d.jsx)("a",{href:"/terms",className:"text-blue-600 hover:text-blue-800 active:text-blue-900 underline touch-manipulation transition-all duration-300 hover:scale-105",children:"Terms of Service"})]})})]})}):v?(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Loading cookie preferences..."})]})}):null}},97790:(a,b,c)=>{c.r(b),c.d(b,{API_ENDPOINTS:()=>y,APIsw:()=>z,ENV_CONFIG:()=>w,addModalStateListener:()=>X,api:()=>A,checkAuthStatus:()=>D,checkConsentMiddleware:()=>ai,checkHealth:()=>G,checkHealthWithCache:()=>ac,consentAwareMiddleware:()=>aj,getAbout:()=>M,getAboutPageData:()=>U,getApiBlocked:()=>ah,getApiFailureModalProps:()=>W,getApiKey:()=>i,getAuthHeaders:()=>S,getBlog:()=>I,getConfig:()=>P,getContact:()=>N,getContactPageData:()=>V,getCurrentPageName:()=>aa,getGlobal503Status:()=>n,getHomePageData:()=>T,getLocations:()=>K,getNav:()=>E,getReferral:()=>H,getReviews:()=>J,getServices:()=>F,getSigninHost:()=>j,getSupplies:()=>L,getTrackedApiCalls:()=>_,getUser:()=>R,healthCheckMiddleware:()=>ae,isApiGlobally503:()=>o,isAuthenticated:()=>Q,login:()=>B,logout:()=>C,performGlobalHealthCheck:()=>p,preTrackRoutesMiddleware:()=>af,removeModalStateListener:()=>Y,resetApiCallTracking:()=>ab,resetGlobal503Status:()=>q,resetHealthGate:()=>ak,setApiBlocked:()=>ag,setGlobal503Status:()=>m,startPageTracking:()=>Z,testConnection:()=>O,trackApiCall:()=>$,withHealthCheck:()=>ad});var d=c(98370),e=c(24830);function f(a){if(!(a instanceof Error))return!1;let b=a.message.toLowerCase();return b.includes("failed to fetch")||b.includes("err_connection_refused")||b.includes("network")||b.includes("connection")||b.includes("econnrefused")||b.includes("fetch")||b.includes("timeout")||b.includes("econnreset")}function g(a){if(!(a instanceof Error))return!1;let b=a.message.toLowerCase();return b.includes("503")||b.includes("service unavailable")||b.includes("temporarily unavailable")||a?.statusCode===503||a?.is503Error===!0||f(a)}function h(a,b){let c=Error(`503 Service Unavailable: ${a}`);return c.statusCode=503,c.is503Error=!0,b&&(c.originalError=b,c.originalMessage=b instanceof Error?b.message:String(b)),c}let i=()=>((a,b)=>"undefined"!=typeof process&&process.env&&process.env[a]?process.env[a]:(a.replace("VITE_",""),""))("VITE_API_KEY_FRONTEND")||"",j=()=>"https://localhost:3000/signin",k=!1,l=null,m=a=>{k=a},n=()=>k,o=()=>k,p=async()=>l||(l=(async()=>{try{let{api:a}=await Promise.resolve().then(c.bind(c,97790)),b=await a.checkHealth();if(b&&b.error)return m(!0),!1;return m(!1),!0}catch(a){return m(!0),!1}})()),q=()=>{m(!1),l=null},r=new Map,s=new Map,t={maxRetries:3,baseDelay:1e3,maxDelay:1e4,retryableStatusCodes:[503,502,504,0],retryableErrors:["Failed to fetch","ERR_CONNECTION_REFUSED","ERR_NETWORK","timeout"]},u=async(a,b,c=t.maxRetries)=>{let d;for(let e=0;e<=c;e++)try{return await a()}catch(g){d=g;let a=v(g);if(!a||e===c)throw e===c&&a&&console.warn(`üîÑ [${b}] Max retries (${c}) exceeded for retryable error`),d;let f=Math.min(t.baseDelay*Math.pow(2,e)+1e3*Math.random(),t.maxDelay);console.warn(`üîÑ [${b}] Attempt ${e+1}/${c+1} failed, retrying in ${Math.round(f)}ms:`,d.message),await new Promise(a=>setTimeout(a,f))}throw d},v=a=>{if(!(a instanceof Error))return!1;let b=a.message.toLowerCase(),c=t.retryableErrors.some(a=>b.includes(a.toLowerCase())),d=a?.statusCode&&t.retryableStatusCodes.includes(a.statusCode);return c||d||f(a)},w=(()=>{let a=(a,b)=>"undefined"!=typeof process&&process.env&&process.env[a]?process.env[a]:(a.replace("VITE_",""),b||""),b=b=>{let c=a(b);return""!==c&&("true"===c||"1"===c)},c=b=>{let c=a(b);if(""===c)return 0;let d=parseInt(c,10);return isNaN(d)?0:d},d={API_URL:a("VITE_API_URL")||a("VITE_API_BASE_URL")||"https://localhost:3000",SKIP_BACKEND_CHECK:b("VITE_SKIP_BACKEND_CHECK"),DEV_MODE:a("VITE_DEV_MODE"),APP_NAME:a("VITE_APP_NAME"),APP_VERSION:a("VITE_APP_VERSION"),PORT:a("VITE_PORT"),DEV_HTTPS:b("VITE_DEV_HTTPS"),IS_SSR:b("VITE_IS_SSR"),MODE:a("VITE_MODE"),ENABLE_DEV_TOOLS:b("ENABLE_DEV_TOOLS"),REDUCE_LOGGING:b("VITE_REDUCE_LOGGING"),API_TIMEOUT:c("VITE_API_TIMEOUT"),API_RETRY_ATTEMPTS:c("VITE_API_RETRY_ATTEMPTS"),CACHE_ENABLED:b("VITE_CACHE_ENABLED"),CACHE_TTL:c("VITE_CACHE_TTL"),CACHE_MAX_SIZE:c("VITE_CACHE_MAX_SIZE"),API_KEY_FRONTEND:i()};return d.API_URL&&!/^https?:\/\//i.test(d.API_URL)&&(d.API_URL=`http://${d.API_URL}`),d})();class x{constructor(){this.token=null,this.loadStoredToken()}static getInstance(){return x.instance||(x.instance=new x),x.instance}loadStoredToken(){}setToken(a){this.token=a}getToken(){return!this.token||this.token.expiresAt<Date.now()?(this.clearToken(),null):this.token.token}getUser(){return this.token?.user||null}isAuthenticated(){return null!==this.getToken()}clearToken(){this.token=null}getAuthHeaders(){let a=this.getToken();return a?{Authorization:`Bearer ${a}`}:{}}needsRefresh(){return!!this.token&&this.token.expiresAt-Date.now()<3e5}}let y={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",STATUS:"/auth/status",REFRESH:"/auth/refresh"},PUBLIC:{NAV:"/public/nav",SERVICES:"/public/services",HEALTH:"/public/health",ABOUT:"/public/about",CONTACT:"/public/contact",REFERRAL:"/public/referral",BLOG:"/public/blog",REVIEWS:"/public/reviews",LOCATIONS:"/public/locations",SUPPLIES:"/public/supplies",TESTIMONIALS:"/public/testimonials",SERVICE_AREAS:"/v0/serviceAreas"},PRIVATE:{NAV:"/v0/nav",SERVICES:"/v0/services",HEALTH:"/health",ABOUT:"/v0/about",CONTACT:"/v0/contact",REFERRAL:"/v0/referral",BLOG:"/v0/blog",REVIEWS:"/v0/reviews",LOCATIONS:"/v0/locations",SUPPLIES:"/v0/supplies",TESTIMONIALS:"/v0/testimonials"}};class z{constructor(){this.modalState={isVisible:!1,failedEndpoints:[],is503Error:!1,onClose:null},this.modalStateListeners=new Set,this.pageApiCalls=[],this.currentPageName="",this.isApiBlocked=!1,this.apiIsDown=!1,this.healthCheckInProgress=!1,this.lastHealthCheckTime=0,this.healthCheckCooldown=3e4,this.failedEndpoints=new Set,this.endpointFailureTimes=new Map,this.endpointCooldown=6e4,this.globalRequestBlocked=!1,this.globalBlockTime=0,this.globalBlockCooldown=3e4,this.pendingRequests=new Map,this.requestTimeouts=new Map,this.healthStatus="unknown",this.healthCheckTime=0,this.HEALTH_CHECK_CACHE_DURATION=3e4,this.jwtAuth=x.getInstance(),this.isDevMode="development"===w.DEV_MODE,this.isDevMode&&!w.REDUCE_LOGGING&&console.log("\uD83D\uDD27 APIsw initialized with config:",{API_URL:w.API_URL,SKIP_BACKEND_CHECK:w.SKIP_BACKEND_CHECK,DEV_MODE:w.DEV_MODE,PORT:w.PORT,IS_SSR:w.IS_SSR,MODE:w.MODE,ENABLE_DEV_TOOLS:w.ENABLE_DEV_TOOLS,API_TIMEOUT:w.API_TIMEOUT,CACHE_ENABLED:w.CACHE_ENABLED})}static getInstance(){return z.instance||(z.instance=new z),z.instance}setApiBlocked(a){this.isApiBlocked=a,this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`üö´ API blocking state changed: ${a?"BLOCKED":"ALLOWED"}`)}getApiBlocked(){return this.isApiBlocked}checkConsentMiddleware(){if(this.isApiBlocked){let a=Error("503 Service Unavailable: API calls blocked due to cookie consent - user must opt in first");throw a.statusCode=503,a.is503Error=!0,a.isConsentBlocked=!0,console.log("\uD83C\uDF6A [CONSENT-BLOCK] API call blocked due to lack of cookie consent"),a}}consentAwareMiddleware(a,b){return async(c,e,f)=>{try{return this.checkConsentMiddleware(),await f()}catch(c){if(console.error(`‚ùå [CONSENT-MIDDLEWARE] ${b} Error for ${a}:`,c),c instanceof Error&&c.message.includes("cookie consent")&&c.message.includes("user must opt in first"))throw console.log(`üç™ [CONSENT-MIDDLEWARE] Consent required for ${a} - not showing API failure modal`),c;if(c instanceof Error&&(c.message.includes("503")||c.message.includes("Service Unavailable")||c.message.includes("temporarily unavailable"))){console.log(`üö® [CONSENT-MIDDLEWARE] 503 Error detected for ${a}, showing API failure modal`),this.showApiFailureModal([a],!0);let e=Error(`503 Service Unavailable: ${a}`);e.failedEndpoints=[a],e.attemptedEndpoints=[a],e.primaryError=c,(0,d.hS)(e,a,{context:b,showModal:!1,logError:!0})}else(0,d.hS)(c,a,{context:b,showModal:!1,logError:!0});throw c}}}async checkApiHealth(){let a=Date.now();if(this.apiIsDown){if(a-this.lastHealthCheckTime<this.healthCheckCooldown)return console.log("\uD83D\uDD04 [API-HEALTH] API is down, cooldown active - skipping health check"),!1;this.apiIsDown=!1}if(this.healthCheckInProgress)return!1;try{this.healthCheckInProgress=!0,this.lastHealthCheckTime=a;let b=await this.checkHealth();if(b&&b.error)return this.apiIsDown=!0,m(!0),!1;return this.apiIsDown=!1,!0}catch(a){return this.apiIsDown=!0,m(!0),!1}finally{this.healthCheckInProgress=!1}}resetHealthGate(){this.apiIsDown=!1,this.healthCheckInProgress=!1,this.lastHealthCheckTime=0,this.failedEndpoints.clear(),this.endpointFailureTimes.clear(),this.globalRequestBlocked=!1,this.globalBlockTime=0,this.pendingRequests.clear(),this.requestTimeouts.forEach(a=>clearTimeout(a)),this.requestTimeouts.clear()}isEndpointInCircuitBreaker(a){if(!this.failedEndpoints.has(a))return!1;let b=this.endpointFailureTimes.get(a)||0;return!(Date.now()-b>this.endpointCooldown)||(this.failedEndpoints.delete(a),this.endpointFailureTimes.delete(a),!1)}addEndpointToCircuitBreaker(a){this.failedEndpoints.add(a),this.endpointFailureTimes.set(a,Date.now())}isGlobalRequestBlocked(){return!!this.globalRequestBlocked&&(!(Date.now()-this.globalBlockTime>this.globalBlockCooldown)||(this.globalRequestBlocked=!1,this.globalBlockTime=0,!1))}activateGlobalRequestBlock(){this.globalRequestBlocked=!0,this.globalBlockTime=Date.now()}getRequestKey(a,b={}){let c=b.method||"GET",d=b.body?JSON.stringify(b.body):"";return`${c}:${a}:${d}`}isRequestPending(a){return this.pendingRequests.has(a)}addPendingRequest(a,b){this.pendingRequests.set(a,b);let c=setTimeout(()=>{this.pendingRequests.delete(a),this.requestTimeouts.delete(a)},3e4);return this.requestTimeouts.set(a,c),b}removePendingRequest(a){this.pendingRequests.delete(a);let b=this.requestTimeouts.get(a);b&&(clearTimeout(b),this.requestTimeouts.delete(a))}async makeRequest(a,b={},c=!1){return await this.makeRequestInternal(a,b,c)}async makeRequestInternal(a,b={},c=!1){if(o()){let a=Error("503 Service Unavailable: API is globally unavailable");throw a.statusCode=503,a.is503Error=!0,a}let d=this.getRequestKey(a,b);if(this.isRequestPending(d))return this.pendingRequests.get(d);if("/v0/health"!==a&&this.isGlobalRequestBlocked()){let b=Error("503 Service Unavailable: API is temporarily unavailable (global block)");throw b.statusCode=503,b.is503Error=!0,b.isGlobalBlock=!0,console.log(`üö´ [GLOBAL-BLOCK] Blocking request to ${a} - global block active`),b}if("/v0/health"!==a&&this.isEndpointInCircuitBreaker(a)){let b=Error(`503 Service Unavailable: ${a} is temporarily unavailable (circuit breaker)`);throw b.statusCode=503,b.is503Error=!0,b.isCircuitBreaker=!0,console.log(`üîí [CIRCUIT-BREAKER] Blocking request to ${a} - in cooldown period`),b}if("/v0/health"!==a&&this.checkConsentMiddleware(),"/v0/health"!==a&&!await this.checkApiHealth()){this.activateGlobalRequestBlock(),this.addEndpointToCircuitBreaker(a);let b=Error("503 Service Unavailable: API health check failed");throw b.statusCode=503,b.is503Error=!0,b}let e=((a,b)=>{let c=a.replace(/\/+$/,""),d=b.startsWith("/")?b:`/${b}`;return`${c}${d}`})(w.API_URL,a),f=this.executeRequestWithRetry(e,a,b,c),g=this.addPendingRequest(d,f);return g.finally(()=>{this.removePendingRequest(d)}),g}async executeRequestWithRetry(a,b,c,d){return this.shouldRetryEndpoint(b)?await u(async()=>await this.executeRequestWithDeduplication(a,b,c,d),`API Request: ${b}`):await this.executeRequestWithDeduplication(a,b,c,d)}shouldRetryEndpoint(a){return["/v0/health","/v0/locations","/v0/service-areas","/v0/services","/v0/supplies"].some(b=>a.includes(b))}async executeRequestWithDeduplication(a,b,c,d){this.trackApiCall(b);let e=((a,b)=>{let c=b?.method||"GET",d=b?.body?JSON.stringify(b.body):"";return`${c}:${a}:${d}`})(b,c);if(r.has(e))return this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`üîÑ Reusing pending request: ${b}`),r.get(e);(a=>{let b=Date.now();return b-(s.get(a)||0)<1e3||(s.set(a,b),!1)})(b)&&(this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`‚è≥ Throttling request to ${b} (rate limited)`),await new Promise(a=>setTimeout(a,1e3)));let f=this.executeRequest(a,c,d);return r.set(e,f),f.finally(()=>{r.delete(e)}),f}async makePublicRequest(a,b={}){return await this.makePublicRequestInternal(a,b)}async makePublicRequestInternal(a,b={}){if(o()){let a=Error("503 Service Unavailable: API is globally unavailable");throw a.statusCode=503,a.is503Error=!0,a}let c=this.getRequestKey(a,b);if(this.isRequestPending(c))return this.pendingRequests.get(c);if("/v0/health"!==a&&this.isGlobalRequestBlocked()){let b=Error("503 Service Unavailable: API is temporarily unavailable (global block)");throw b.statusCode=503,b.is503Error=!0,b.isGlobalBlock=!0,console.log(`üö´ [GLOBAL-BLOCK] Blocking public request to ${a} - global block active`),b}if("/v0/health"!==a&&this.isEndpointInCircuitBreaker(a)){let b=Error(`503 Service Unavailable: ${a} is temporarily unavailable (circuit breaker)`);throw b.statusCode=503,b.is503Error=!0,b.isCircuitBreaker=!0,console.log(`üîí [CIRCUIT-BREAKER] Blocking public request to ${a} - in cooldown period`),b}if("/v0/health"!==a&&this.checkConsentMiddleware(),"/v0/health"!==a&&!await this.checkApiHealth()){this.activateGlobalRequestBlock(),this.addEndpointToCircuitBreaker(a);let b=Error("503 Service Unavailable: API health check failed");throw b.statusCode=503,b.is503Error=!0,b}let d=((a,b)=>{let c=a.replace(/\/+$/,""),d=b.startsWith("/")?b:`/${b}`;return`${c}${d}`})(w.API_URL,a),e=this.executePublicRequest(d,b),f=this.addPendingRequest(c,e);return f.finally(()=>{this.removePendingRequest(c)}),f}async executeRequest(a,b,c){let d={"Content-Type":"application/json",Accept:"application/json","x-api-key":i()};if(this.isDevMode&&!w.REDUCE_LOGGING){let a=i();console.log("\uD83D\uDD11 API Key Configuration:",{hasApiKey:!!a,apiKeyLength:a?.length||0,apiKeyPrefix:a?.substring(0,10)+"...",fullApiKey:a,headers:d})}d["User-Agent"]=`${w.APP_NAME}-Client/${w.APP_VERSION}`,d.Origin=`${w.DEV_HTTPS?"https":"http"}://localhost:${w.PORT}`,c&&Object.assign(d,this.jwtAuth.getAuthHeaders());let e={method:"GET",headers:d,credentials:"include",...b},f=async a=>{this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`üåê API Request: ${a}`);let b=console.error,c=console.warn,d=console.log;console.error=(...a)=>{let c=a[0]?.toString()||"";c.includes("ERR_CONNECTION_REFUSED")||c.includes("Failed to fetch")||c.includes("net::ERR_CONNECTION_REFUSED")||c.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||c.includes("localhost:3000")||c.includes("ERR_NETWORK")||c.includes("ERR_INTERNET_DISCONNECTED")||b.apply(console,a)},console.warn=(...a)=>{let b=a[0]?.toString()||"";b.includes("ERR_CONNECTION_REFUSED")||b.includes("Failed to fetch")||b.includes("net::ERR_CONNECTION_REFUSED")||b.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||b.includes("localhost:3000")||b.includes("ERR_NETWORK")||b.includes("ERR_INTERNET_DISCONNECTED")||c.apply(console,a)},console.log=(...a)=>{let b=a[0]?.toString()||"";b.includes("ERR_CONNECTION_REFUSED")||b.includes("Failed to fetch")||b.includes("net::ERR_CONNECTION_REFUSED")||b.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||b.includes("localhost:3000")||b.includes("ERR_NETWORK")||b.includes("ERR_INTERNET_DISCONNECTED")||d.apply(console,a)};try{let f=await fetch(a,e);return console.error=b,console.warn=c,console.log=d,f}catch(a){if(console.error=b,console.warn=c,console.log=d,a instanceof TypeError&&a.message.includes("Failed to fetch"))return new Response(JSON.stringify({error:!0,statusCode:503,message:"Service Unavailable: Connection failed",is503Error:!0,isConnectionError:!0}),{status:503,statusText:"Service Unavailable",headers:{"Content-Type":"application/json"}});throw a}};try{let b=await f(a);if(b.ok){let c=await b.json();return this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`‚úÖ API Success (${a}):`,c),a.includes("/v0/locations")&&console.log("\uD83D\uDD27 Locations API response details:",{url:a,status:b.status,dataType:typeof c,hasLocations:!!(c&&c.locations),hasServiceTypes:!!(c&&c.serviceTypes),dataKeys:c?Object.keys(c):[]}),c}{if(503===b.status)return await b.json();let a=await this.handleErrorResponse(b);throw Error(a)}}catch(a){throw a}}async executePublicRequest(a,b={}){let c={"Content-Type":"application/json",Accept:"application/json","x-api-key":i()};if(this.isDevMode&&!w.REDUCE_LOGGING){let a=i();console.log("\uD83D\uDD11 Public API Key Configuration:",{hasApiKey:!!a,apiKeyLength:a?.length||0,apiKeyPrefix:a?.substring(0,10)+"...",fullApiKey:a,headers:c})}c["User-Agent"]=`${w.APP_NAME}-Client/${w.APP_VERSION}`,c.Origin=`${w.DEV_HTTPS?"https":"http"}://localhost:${w.PORT}`;let d={method:"GET",headers:c,credentials:"include",...b},e=async a=>{this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`üåê Public API Request: ${a}`);let b=console.error,c=console.warn,e=console.log;console.error=(...a)=>{let c=a[0]?.toString()||"";c.includes("ERR_CONNECTION_REFUSED")||c.includes("Failed to fetch")||c.includes("net::ERR_CONNECTION_REFUSED")||c.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||c.includes("localhost:3000")||c.includes("ERR_NETWORK")||c.includes("ERR_INTERNET_DISCONNECTED")||b.apply(console,a)},console.warn=(...a)=>{let b=a[0]?.toString()||"";b.includes("ERR_CONNECTION_REFUSED")||b.includes("Failed to fetch")||b.includes("net::ERR_CONNECTION_REFUSED")||b.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||b.includes("localhost:3000")||b.includes("ERR_NETWORK")||b.includes("ERR_INTERNET_DISCONNECTED")||c.apply(console,a)},console.log=(...a)=>{let b=a[0]?.toString()||"";b.includes("ERR_CONNECTION_REFUSED")||b.includes("Failed to fetch")||b.includes("net::ERR_CONNECTION_REFUSED")||b.includes("GET https://localhost:3000/v0/health net::ERR_CONNECTION_REFUSED")||b.includes("localhost:3000")||b.includes("ERR_NETWORK")||b.includes("ERR_INTERNET_DISCONNECTED")||e.apply(console,a)};try{let f=await fetch(a,d);return console.error=b,console.warn=c,console.log=e,f}catch(a){if(console.error=b,console.warn=c,console.log=e,a instanceof TypeError&&a.message.includes("Failed to fetch"))return new Response(JSON.stringify({error:!0,statusCode:503,message:"Service Unavailable: Connection failed",is503Error:!0,isConnectionError:!0}),{status:503,statusText:"Service Unavailable",headers:{"Content-Type":"application/json"}});throw a}};try{let b=await e(a);if(b.ok){let c=await b.json();return this.isDevMode&&!w.REDUCE_LOGGING&&console.log(`‚úÖ Public API Success (${a}):`,c),c}{if(503===b.status)return await b.json();let a=await this.handlePublicErrorResponse(b);throw Error(a)}}catch(a){throw a}}async handlePublicErrorResponse(a){try{let b=(await a.json()).message||a.statusText;if(503===a.status)return this.isDevMode&&!w.REDUCE_LOGGING&&console.warn("‚ö†Ô∏è Public API returned 503 - Service Unavailable"),`HTTP 503: ${b}`;return`HTTP ${a.status}: ${b}`}catch{return`HTTP ${a.status}: ${a.statusText}`}}async handleErrorResponse(a){try{let b=(await a.json()).message||a.statusText;if(503===a.status){console.warn("‚ö†Ô∏è API returned 503 - Service Unavailable");let c=a.url.replace(w.API_URL,""),e=Error(`HTTP 503: ${b}`);return(0,d.hS)(e,c,{context:"APIsw Service",showModal:!1,logError:!0}),`Service temporarily unavailable (503): ${b}`}if(403===a.status)return this.isDevMode&&!w.REDUCE_LOGGING&&console.warn("\uD83D\uDD10 Authentication failed, redirecting to signin"),this.redirectToSignin(),`Authentication required: ${b}`;if(429===a.status||b.includes("Too many requests"))return this.isDevMode&&!w.REDUCE_LOGGING&&console.warn("‚ö†Ô∏è Rate limited by backend. Consider enabling development API override."),`Rate limited: ${b}`;return`HTTP ${a.status}: ${b}`}catch{if(503===a.status){console.warn("‚ö†Ô∏è API returned 503 - Service Unavailable (no JSON response)");let b=a.url.replace(w.API_URL,""),c=Error(`HTTP 503: ${a.statusText}`);return(0,d.hS)(c,b,{context:"APIsw Service",showModal:!1,logError:!0}),`Service temporarily unavailable (503): ${a.statusText}`}return`HTTP ${a.status}: ${a.statusText}`}}redirectToSignin(){try{w.API_URL.replace("/api","/signin")}catch(a){console.error("‚ùå Failed to redirect to signin:",a)}}async login(a,b){try{let c=await this.makeRequest(y.AUTH.LOGIN,{method:"POST",body:JSON.stringify({email:a,password:b})});if(c&&c.success&&c.token){let a=Date.now()+(c.expiresIn||36e5);this.jwtAuth.setToken({token:c.token,expiresAt:a,user:c.user}),this.isDevMode&&!w.REDUCE_LOGGING&&console.log("\uD83D\uDD10 Login successful, JWT token stored")}return c}catch(a){throw this.isDevMode&&!w.REDUCE_LOGGING&&console.error("\uD83D\uDD10 Login failed:",a),a}}async logout(){try{await this.makeRequest(y.AUTH.LOGOUT,{method:"POST"},!0)}catch(a){this.isDevMode&&!w.REDUCE_LOGGING&&console.warn("‚ö†Ô∏è Server logout failed, but clearing local data:",a)}finally{this.jwtAuth.clearToken()}}async checkAuthStatus(){let a=e.n.getCachedApiResponse(y.AUTH.STATUS);if(a)return console.log("‚úÖ Using cached auth status data"),a;try{let a=await this.makeRequest(y.AUTH.STATUS,{},!0);return a&&(e.n.cacheApiResponse(y.AUTH.STATUS,a,12e4),console.log("\uD83D\uDCE6 Cached auth status data")),a}catch(a){return{success:!1,message:"Not authenticated"}}}async loadInitialData(){try{this.isDevMode&&!w.REDUCE_LOGGING&&console.log("\uD83D\uDE80 Loading initial data (batch request)...");let[a,b,c]=await Promise.allSettled([this.getNav(),this.getServices(),this.checkAuthStatus()]),d={nav:"fulfilled"===a.status?a.value:null,services:"fulfilled"===b.status?b.value:null,authStatus:"fulfilled"===c.status?c.value:null};return this.isDevMode&&!w.REDUCE_LOGGING&&console.log("‚úÖ Initial data loaded:",{nav:!!d.nav,services:!!d.services,authStatus:!!d.authStatus}),d}catch(a){throw this.isDevMode&&!w.REDUCE_LOGGING&&console.error("‚ùå Failed to load initial data:",a),a}}async getNav(){let a=e.n.getCachedApiResponse(y.PRIVATE.NAV);if(a)return console.log("‚úÖ Using cached navigation data"),a;let b=await this.makeRequest(y.PRIVATE.NAV);return b&&(e.n.cacheApiResponse(y.PRIVATE.NAV,b,6e5),console.log("\uD83D\uDCE6 Cached navigation data")),b}async getServices(){let a=e.n.getCachedApiResponse(y.PUBLIC.SERVICES);if(a)return a;let b=await this.makeRequest(y.PUBLIC.SERVICES);return b&&e.n.cacheApiResponse(y.PUBLIC.SERVICES,b,6e5),b}async checkHealth(){let a=e.n.getCachedApiResponse("/v0/health");if(a)return a;try{let a=await u(async()=>await this.makeRequest("/v0/health"),"Health Check");return a&&e.n.cacheApiResponse("/v0/health",a,3e4),a}catch(b){let a=function(a,b){if(g(a))return a;if(f(a)){let c=Error(`503 Service Unavailable: Connection failed for ${b}`);return c.statusCode=503,c.is503Error=!0,c.isConnectionError=!0,a&&(c.originalError=a,c.originalMessage=a instanceof Error?a.message:String(a)),c}if(function(a){if(!(a instanceof Error))return!1;let b=a.message.toLowerCase();return b.includes("500")||b.includes("501")||b.includes("502")||b.includes("503")||b.includes("504")||b.includes("505")}(a))return h(b,a);if(a instanceof Error){let c=a.message.toLowerCase();if(c.includes("api")||c.includes("request")||c.includes("response")||c.includes("http"))return h(b,a)}return a}(b,"/v0/health");if(g(a))return m(!0),{error:!0,statusCode:503,message:a.message,is503Error:!0,isConnectionError:a?.isConnectionError||!1};throw b}}async getReferral(){return await this.makeRequest(y.PUBLIC.REFERRAL)}async getBlog(){return await this.makeRequest(y.PUBLIC.BLOG)}async getReviews(){return await this.makeRequest(y.PUBLIC.REVIEWS)}async getLocations(){let a=e.n.getCachedApiResponse(y.PUBLIC.LOCATIONS);if(a)return console.log("‚úÖ Using cached locations data"),a;console.log("\uD83D\uDD27 APIsw.getLocations() called - fetching from:",y.PUBLIC.LOCATIONS);let b=await this.makeRequest(y.PUBLIC.LOCATIONS);return b&&(e.n.cacheApiResponse(y.PUBLIC.LOCATIONS,b,9e5),console.log("\uD83D\uDCE6 Cached locations data")),console.log("\uD83D\uDD27 APIsw.getLocations() response:",{hasData:!!b,hasLocations:!!(b&&b.locations),hasServiceTypes:!!(b&&b.serviceTypes),locationsCount:b?.locations?.length||0,serviceTypesCount:b?.serviceTypes?.length||0}),b}async getSupplies(){let a=e.n.getCachedApiResponse(y.PUBLIC.SUPPLIES);if(a)return console.log("‚úÖ Using cached supplies data"),a;console.log("\uD83D\uDD27 APIsw.getSupplies() called - fetching from:",y.PUBLIC.SUPPLIES);let b=await this.makeRequest(y.PUBLIC.SUPPLIES);return b&&(e.n.cacheApiResponse(y.PUBLIC.SUPPLIES,b,6e5),console.log("\uD83D\uDCE6 Cached supplies data")),console.log("\uD83D\uDD27 APIsw.getSupplies() response:",{hasData:!!b,hasSupplies:!!(b&&b.supplies),suppliesCount:b?.supplies?.length||0,firstSupplyStructure:b?.supplies?.[0]}),b}async getServiceAreas(){return await this.makePublicRequest(y.PUBLIC.SERVICE_AREAS)}async getAbout(){return await this.makeRequest(y.PUBLIC.ABOUT)}async getContact(){return await this.makeRequest(y.PUBLIC.CONTACT)}async getPrivateNav(){return await this.makeRequest(y.PRIVATE.NAV,{},!0)}async getPrivateServices(){return await this.makeRequest(y.PRIVATE.SERVICES,{},!0)}async getPrivateLocations(){return await this.makeRequest(y.PRIVATE.LOCATIONS,{},!0)}async getPrivateSupplies(){return await this.makeRequest(y.PRIVATE.SUPPLIES,{},!0)}async getPrivateReviews(){return await this.makeRequest(y.PRIVATE.REVIEWS,{},!0)}async getPrivateTestimonials(){return await this.makeRequest(y.PRIVATE.TESTIMONIALS,{},!0)}async getPrivateAbout(){return await this.makeRequest(y.PRIVATE.ABOUT,{},!0)}async getPrivateContact(){return await this.makeRequest(y.PRIVATE.CONTACT,{},!0)}async getPrivateReferral(){return await this.makeRequest(y.PRIVATE.REFERRAL,{},!0)}async getPrivateBlog(){return await this.makeRequest(y.PRIVATE.BLOG,{},!0)}async getHomePageData(){console.log("\uD83D\uDE80 Loading consolidated home page data...");let a=["/v0/services","/v0/recentMoves","/v0/testimonials","/v0/nav","/auth/status"],[b,c,d,e,f]=await Promise.allSettled([this.makeRequest(y.PRIVATE.SERVICES),this.makeRequest("/v0/recentMoves"),this.makeRequest(y.PRIVATE.TESTIMONIALS),this.makeRequest(y.PRIVATE.NAV),this.checkAuthStatus()]),g={services:"fulfilled"===b.status?b.value:null,recentMoves:"fulfilled"===c.status?c.value:null,testimonials:"fulfilled"===d.status?d.value:null,nav:"fulfilled"===e.status?e.value:null,authStatus:"fulfilled"===f.status?f.value:null},h=[],i=[];if("rejected"===b.status&&(h.push("/v0/services"),i.push(b.reason)),"rejected"===c.status&&(h.push("/v0/recentMoves"),i.push(c.reason)),"rejected"===d.status&&(h.push("/v0/testimonials"),i.push(d.reason)),"rejected"===e.status&&(h.push("/v0/nav"),i.push(e.reason)),"rejected"===f.status&&(h.push("/auth/status"),i.push(f.reason)),h.length>0){let b=i[0],c=`Home page API failed - attempted endpoints: ${a.join(", ")}, failed: ${h.join(", ")}`;console.error("‚ùå Consolidated home page data failed:",{attemptedEndpoints:a,failedEndpoints:h,primaryError:b?.message||"Unknown error"});let d=Error(c);throw d.failedEndpoints=h,d.attemptedEndpoints=a,d.primaryError=b,d}return console.log("‚úÖ Consolidated home page data loaded:",{services:!!g.services,recentMoves:!!g.recentMoves,testimonials:!!g.testimonials,nav:!!g.nav,authStatus:!!g.authStatus}),g}async getAboutPageData(){try{console.log("\uD83D\uDE80 Loading consolidated about page data...");let[a,b]=await Promise.allSettled([this.makeRequest(y.PRIVATE.ABOUT),this.makeRequest("/v0/recentMoves/total")]),c={about:"fulfilled"===a.status?a.value:null,totalMovesCount:"fulfilled"===b.status?b.value:500};return console.log("‚úÖ Consolidated about page data loaded:",{about:!!c.about,totalMovesCount:c.totalMovesCount}),c}catch(a){throw console.error("‚ùå Failed to load consolidated about page data:",a),a}}async getContactPageData(){try{console.log("\uD83D\uDE80 Loading consolidated contact page data...");let a={contact:await this.makeRequest(y.PRIVATE.CONTACT)};return console.log("‚úÖ Consolidated contact page data loaded:",{contact:!!a.contact}),a}catch(a){throw console.error("‚ùå Failed to load consolidated contact page data:",a),a}}showApiFailureModal(a,b=!1,c){let d=Array.from(new Set(a));this.modalState={isVisible:!0,failedEndpoints:d,is503Error:b,onClose:c||null},this.notifyModalStateListeners(),this.isDevMode&&!w.REDUCE_LOGGING&&console.log("\uD83D\uDD27 APIsw: Showing API failure modal:",{originalFailedEndpoints:a,uniqueEndpoints:d,is503Error:b,hasOnClose:!!c,currentPage:this.currentPageName,allTrackedCalls:this.getTrackedApiCalls()})}hideApiFailureModal(){this.modalState={isVisible:!1,failedEndpoints:[],is503Error:!1,onClose:null},this.notifyModalStateListeners(),this.isDevMode&&!w.REDUCE_LOGGING&&console.log("\uD83D\uDD27 APIsw: Hiding API failure modal")}getModalState(){return{...this.modalState}}getApiFailureModalProps(){return{isVisible:this.modalState.isVisible,onClose:()=>{this.hideApiFailureModal(),this.modalState.onClose&&this.modalState.onClose()},failedEndpoints:this.modalState.failedEndpoints,is503Error:this.modalState.is503Error}}addModalStateListener(a){this.modalStateListeners.add(a)}removeModalStateListener(a){this.modalStateListeners.delete(a)}notifyModalStateListeners(){this.modalStateListeners.forEach(a=>{try{a()}catch(a){console.error("Error in modal state listener:",a)}})}startPageTracking(a){this.currentPageName!==a&&(this.currentPageName=a,this.pageApiCalls=[])}trackApiCall(a){this.pageApiCalls.includes(a)||this.pageApiCalls.push(a)}getTrackedApiCalls(){return Array.from(this.pageApiCalls)}getCurrentPageName(){return this.currentPageName}resetApiCallTracking(){this.pageApiCalls=[],this.currentPageName="",console.log("\uD83D\uDD27 [API-TRACKING] Reset API call tracking")}async checkHealthWithCache(){let a=Date.now();if("unknown"!==this.healthStatus&&a-this.healthCheckTime<this.HEALTH_CHECK_CACHE_DURATION)return"healthy"===this.healthStatus;try{return console.log("\uD83C\uDFE5 [HEALTH-MIDDLEWARE] Checking API health status..."),await this.checkHealth(),this.healthStatus="healthy",this.healthCheckTime=a,console.log("‚úÖ [HEALTH-MIDDLEWARE] Health check passed"),!0}catch(b){return console.error("‚ùå [HEALTH-MIDDLEWARE] Health check failed:",b),this.healthStatus="unhealthy",this.healthCheckTime=a,this.trackApiCall("/v0/health"),!1}}async healthCheckMiddleware(a,b,c){let d=a.url||a.path||"/unknown";if(!await this.checkHealthWithCache()){console.log("\uD83D\uDEA8 [HEALTH-MIDDLEWARE] Health check failed, recording all routes as 503");let a=this.getTrackedApiCalls();console.log("\uD83D\uDD27 [HEALTH-MIDDLEWARE] All tracked routes:",a);let e=["/v0/health",...a];console.log("\uD83D\uDD27 [HEALTH-MIDDLEWARE] All failed routes for modal:",e),this.showApiFailureModal(e,!0),b.statusCode=503,b.status=503,b.error=Error(`Service Unavailable (503): Health check failed for ${d}`),c(Error(`Service Unavailable (503): Health check failed for ${d}`));return}c()}preTrackRoutesMiddleware(a){a.forEach(a=>{this.trackApiCall(a)})}async withHealthCheck(a,b,c=[]){if(!await this.checkHealthWithCache()){console.log("\uD83D\uDEA8 [HEALTH-MIDDLEWARE] Health check failed, recording all routes as 503"),c.forEach(a=>{this.pageApiCalls.includes(a)||this.trackApiCall(a)});let b=["/v0/health",...c];throw this.showApiFailureModal(b,!0),Error(`Service Unavailable (503): Health check failed for ${a}`)}try{return await b()}catch(b){throw console.error(`‚ùå [HEALTH-MIDDLEWARE] API call failed for ${a}:`,b),b}}async testConnection(){try{let a=await this.checkHealth();return{success:!0,data:a,apiUrl:w.API_URL,skipBackendCheck:w.SKIP_BACKEND_CHECK}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error",apiUrl:w.API_URL,skipBackendCheck:w.SKIP_BACKEND_CHECK}}}getConfig(){return{apiUrl:w.API_URL,devMode:this.isDevMode,skipBackendCheck:w.SKIP_BACKEND_CHECK,isAuthenticated:this.jwtAuth.isAuthenticated(),hasToken:!!this.jwtAuth.getToken(),appName:w.APP_NAME,appVersion:w.APP_VERSION,enableDevTools:w.ENABLE_DEV_TOOLS,reduceLogging:w.REDUCE_LOGGING,apiTimeout:w.API_TIMEOUT,cacheEnabled:w.CACHE_ENABLED,cacheTtl:w.CACHE_TTL,cacheMaxSize:w.CACHE_MAX_SIZE}}isAuthenticated(){return this.jwtAuth.isAuthenticated()}getUser(){return this.jwtAuth.getUser()}getAuthHeaders(){return this.jwtAuth.getAuthHeaders()}}let A=z.getInstance(),B=(a,b)=>A.login(a,b),C=()=>A.logout(),D=()=>A.checkAuthStatus(),E=()=>A.getNav(),F=()=>A.getServices(),G=()=>A.checkHealth(),H=()=>A.getReferral(),I=()=>A.getBlog(),J=()=>A.getReviews(),K=()=>A.getLocations(),L=()=>A.getSupplies(),M=()=>A.getAbout(),N=()=>A.getContact(),O=()=>A.testConnection(),P=()=>A.getConfig(),Q=()=>A.isAuthenticated(),R=()=>A.getUser(),S=()=>A.getAuthHeaders(),T=()=>A.getHomePageData(),U=()=>A.getAboutPageData(),V=()=>A.getContactPageData(),W=()=>A.getApiFailureModalProps(),X=a=>A.addModalStateListener(a),Y=a=>A.removeModalStateListener(a),Z=a=>A.startPageTracking(a),$=a=>A.trackApiCall(a),_=()=>A.getTrackedApiCalls(),aa=()=>A.getCurrentPageName(),ab=()=>A.resetApiCallTracking(),ac=()=>A.checkHealthWithCache(),ad=(a,b,c)=>A.withHealthCheck(a,b,c),ae=(a,b,c)=>A.healthCheckMiddleware(a,b,c),af=a=>A.preTrackRoutesMiddleware(a),ag=a=>A.setApiBlocked(a),ah=()=>A.getApiBlocked(),ai=()=>A.checkConsentMiddleware(),aj=(a,b)=>A.consentAwareMiddleware(a,b),ak=()=>A.resetHealthGate()},98370:(a,b,c)=>{c.d(b,{Ap:()=>g,GI:()=>h,hS:()=>f}),c(82015);class d{addFailedEndpoint(a,b=!1){this.failedEndpoints.add(a),b&&(this.is503Error=!0)}setModalShown(a){this.modalShown=a}isModalShown(){return this.modalShown}getFailedEndpoints(){return Array.from(this.failedEndpoints)}is503ErrorOccurred(){return this.is503Error}clear(){this.failedEndpoints.clear(),this.is503Error=!1,this.modalShown=!1}hasFailures(){return this.failedEndpoints.size>0}constructor(){this.failedEndpoints=new Set,this.is503Error=!1,this.modalShown=!1}}let e=new d;function f(a,b,c={}){let{showModal:d=!0,logError:g=!0,context:h="API Call"}=c,i=a instanceof Error?a.message:"Unknown error",j=i.includes("503")||i.includes("Service Unavailable")||i.includes("Failed to fetch")||i.includes("ERR_CONNECTION_REFUSED")||i.includes("ECONNREFUSED")||a?.statusCode===503||a?.is503Error===!0;e.addFailedEndpoint(b,j);let k=a?.failedEndpoints||[];a?.attemptedEndpoints;let l=a?.primaryError,m={endpoint:k.length>0?k.join(", "):b,error:k.length>0?`Failed APIs: ${k.join(", ")}
Primary: ${k[0]||b}

${l?.message||i}`:i,timestamp:Date.now(),context:h,is503Error:j,failedEndpoints:k.length>0?k:e.getFailedEndpoints()};g&&console.error(`üîß ${h} Error for ${b}:`,a);let n=function(){try{let a=localStorage.getItem("packmovego-cookie-preferences");if(a){let b=JSON.parse(a);return!0===b.hasMadeChoice&&!1===b.hasOptedOut}return!1}catch(a){return console.warn("\uD83D\uDD27 Error checking cookie consent:",a),!1}}();if(d&&n&&e.isModalShown());else if(d&&!n){let a=`api-error-${b}-${Date.now()}`;sessionStorage.setItem(a,JSON.stringify(m)),sessionStorage.setItem("pending-api-errors","true")}}function g(){return e.getFailedEndpoints()}function h(){return e.is503ErrorOccurred()}}};